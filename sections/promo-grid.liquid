{% comment %}
  MYMY â€“ Grid exacta:
  - Izquierda: card vertical (logo + 2 imÃ¡genes de producto, en columna)
  - Derecha arriba: banner promo
  - Derecha abajo: 2 mini-cards (lado a lado)
{% endcomment %}

<section id="mymy-grid-{{ section.id }}" class="mymy-grid">
  {% assign left_block = section.blocks | where: 'type', 'left_card' | first %}
  {% assign promo_block = section.blocks | where: 'type', 'promo_banner' | first %}
  {% assign small1_block = section.blocks | where: 'type', 'small_left' | first %}
  {% assign small2_block = section.blocks | where: 'type', 'small_right' | first %}

  <div class="grid-wrap">
    {%- if left_block -%}
      <div
        class="left-col card"
        style="
          width: {{ section.settings.left_card_width }};
          height: {{ section.settings.left_card_height }};
        "
      >
        {%- if left_block.settings.link != blank -%}<a href="{{ left_block.settings.link }}">{%- endif -%}

        {%- if left_block.settings.logo != blank -%}
          <div class="brand">
            {{
              left_block.settings.logo
              | image_url: width: 360
              | image_tag: alt: left_block.settings.logo_alt, class: 'brand-img'
            }}
          </div>
        {%- endif -%}

        <div class="prod-stack">
          {%- if left_block.settings.img1 != blank -%}
            {{
              left_block.settings.img1
              | image_url: width: 1200
              | image_tag: alt: left_block.settings.alt1, class: 'prod-img'
            }}
          {%- else -%}
            <div class="ph ph--prod">Imagen 1</div>
          {%- endif -%}

          {%- if left_block.settings.img2 != blank -%}
            {{
              left_block.settings.img2
              | image_url: width: 1200
              | image_tag: alt: left_block.settings.alt2, class: 'prod-img'
            }}
          {%- else -%}
            <div class="ph ph--prod">Imagen 2</div>
          {%- endif -%}
        </div>

        {%- if left_block.settings.link != blank -%}</a>{%- endif -%}
      </div>
    {%- endif -%}

    <div class="right-col">
      <div class="promo-top card">
        {%- if promo_block -%}
          {%- if promo_block.settings.link != blank -%}<a href="{{ promo_block.settings.link }}">{%- endif -%}
          {%- if promo_block.settings.image != blank -%}
            {{
              promo_block.settings.image
              | image_url: width: 1400
              | image_tag: alt: promo_block.settings.alt, class: 'banner-img'
            }}
          {%- else -%}
            <div class="ph ph--banner">Banner</div>
          {%- endif -%}
          {%- if promo_block.settings.link != blank -%}</a>{%- endif -%}
        {%- else -%}
          <div class="ph ph--banner">Banner</div>
        {%- endif -%}
      </div>

      <div class="mini-row">
        <div class="mini card">
          {%- if small1_block -%}
            {%- if small1_block.settings.link != blank -%}<a href="{{ small1_block.settings.link }}">{%- endif -%}
            {%- if small1_block.settings.image != blank -%}
              {{
                small1_block.settings.image
                | image_url: width: 900
                | image_tag: alt: small1_block.settings.alt, class: 'mini-img'
              }}
            {%- else -%}
              <div class="ph ph--mini">Mini 1</div>
            {%- endif -%}
            {%- if small1_block.settings.link != blank -%}</a>{%- endif -%}
          {%- else -%}
            <div class="ph ph--mini">Mini 1</div>
          {%- endif -%}
        </div>

        <div class="mini card">
          {%- if small2_block -%}
            {%- if small2_block.settings.link != blank -%}<a href="{{ small2_block.settings.link }}">{%- endif -%}
            {%- if small2_block.settings.image != blank -%}
              {{
                small2_block.settings.image
                | image_url: width: 900
                | image_tag: alt: small2_block.settings.alt, class: 'mini-img'
              }}
            {%- else -%}
              <div class="ph ph--mini">Mini 2</div>
            {%- endif -%}
            {%- if small2_block.settings.link != blank -%}</a>{%- endif -%}
          {%- else -%}
            <div class="ph ph--mini">Mini 2</div>
          {%- endif -%}
        </div>
      </div>
    </div>
  </div>
</section>

{% comment %} <style>
  #mymy-grid-{{ section.id }} {
      --gap: {{ section.settings.gap | default: 12 }}px;
      --radius: {{ section.settings.radius | default: 16 }}px;
      --accent: {{ section.settings.accent | default: '#f8ccd2' }};
      --card-bg: #fff;
      --prod-size: {{ section.settings.prod_size | default: 220 }}px;

      padding: 0 30px; /* margen interno en los lados */
      margin: 0 auto;
      max-width: 1400px;
  }

  #mymy-grid-{{ section.id }} .grid-wrap {
      display: grid;
      grid-template-columns: 1fr 1.2fr;
      gap: var(--gap);
      align-items: start;
  }

  /* Columna izquierda */
  #mymy-grid-{{ section.id }} .left-col {
      display: flex;
      flex-direction: column;
      gap: var(--gap);
      align-self: start;
  }

  /* Columna derecha */
  #mymy-grid-{{ section.id }} .right-col {
      display: grid;
      grid-template-rows: auto 1fr;
      gap: var(--gap);
  }

  #mymy-grid-{{ section.id }} .mini-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--gap);
  }

  /* Cards */
  #mymy-grid-{{ section.id }} .card {
      background: var(--card-bg);
      border-radius: var(--radius);
      border: 2px solid var(--accent);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: center;
  }

  /* Logo */
  #mymy-grid-{{ section.id }} .brand {
      display: flex;
      justify-content: center;
      padding: 10px;
  }
  #mymy-grid-{{ section.id }} .brand-img {
      max-width: 80px;
      height: auto;
  }



  /* Productos izquierda */
  #mymy-grid-{{ section.id }} .prod-stack {
      display: flex;
      flex-direction: column;
      gap: var(--gap);
      align-items: center;
  }
  #mymy-grid-{{ section.id }} .prod-img {
      width: var(--prod-size) !important;
      max-width: 100% !important;
      height: auto !important;
      object-fit: contain !important;
      display: block;
  }

  /* Banner */
  #mymy-grid-{{ section.id }} .banner-img {
      width: 100%;
      height: auto;
      object-fit: cover;
  }

  /* Minis */
  #mymy-grid-{{ section.id }} .mini-img {
      width: 100%;
      height: auto;
      object-fit: cover;
  }

  /* Placeholders */
  #mymy-grid-{{ section.id }} .ph {
      display: flex;
      align-items: center;
      justify-content: center;
      color: #999;
      background: #fafafa;
  }
  #mymy-grid-{{ section.id }} .ph--prod { min-height: 180px; }
  #mymy-grid-{{ section.id }} .ph--banner { min-height: 220px; }
  #mymy-grid-{{ section.id }} .ph--mini { min-height: 200px; }

  /* Responsive */
  @media (max-width: 980px) {
      #mymy-grid-{{ section.id }} .grid-wrap {
          grid-template-columns: 1fr;
      }
  }
</style> {% endcomment %}

<style>
  #mymy-grid-{{ section.id }} {
    --gap: {{ section.settings.gap | default: 12 }}px;
    --radius: {{ section.settings.radius | default: 16 }}px;
    --accent: {{ section.settings.accent | default: '#f8ccd2' }};
    --card-bg: #fff;
    --prod-size: {{ section.settings.prod_size | default: 220 }}px;

    padding: 0 30px;
    margin: 0 auto;
    max-width: 1400px;
  }

  #mymy-grid-{{ section.id }} .grid-wrap {
    display: grid;
    grid-template-columns: 1fr 1.2fr;
    gap: var(--gap);
    align-items: start;
  }

  /* Columna izquierda */
  #mymy-grid-{{ section.id }} .left-col {
    display: flex;
    flex-direction: column;
    gap: var(--gap);
    align-self: start;
    width: {{ section.settings.left_card_width }};
    height: {{ section.settings.left_card_height }};
    max-width: 100%;
  }

  /* Columna derecha */
  #mymy-grid-{{ section.id }} .right-col {
    display: grid;
    grid-template-rows: auto 1fr;
    gap: var(--gap);
  }

  #mymy-grid-{{ section.id }} .mini-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--gap);
  }

  /* Cards */
  #mymy-grid-{{ section.id }} .card {
    background: var(--card-bg);
    border-radius: var(--radius);
    border: 2px solid var(--accent);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  /* Logo */
  #mymy-grid-{{ section.id }} .brand {
    display: flex;
    justify-content: center;
    padding: 10px;
  }
  #mymy-grid-{{ section.id }} .brand-img {
    max-width: 80px;
    height: auto;
  }

  /* Productos izquierda */
  #mymy-grid-{{ section.id }} .prod-stack {
    display: flex;
    flex-direction: column;
    gap: var(--gap);
    align-items: center;
  }
  #mymy-grid-{{ section.id }} .prod-img {
    width: var(--prod-size) !important;
    max-width: 100% !important;
    height: auto !important;
    object-fit: contain !important;
    display: block;
  }

  /* Banner */
  #mymy-grid-{{ section.id }} .banner-img {
    width: 100%;
    height: auto;
    object-fit: cover;
    display: block;
  }

  /* Minis */
  #mymy-grid-{{ section.id }} .mini-img {
    width: 100%;
    height: auto;
    object-fit: cover;
    display: block;
  }

  /* Placeholders */
  #mymy-grid-{{ section.id }} .ph {
    display: flex;
    align-items: center;
    justify-content: center;
    color: #999;
    background: #fafafa;
  }
  #mymy-grid-{{ section.id }} .ph--prod { min-height: 180px; }
  #mymy-grid-{{ section.id }} .ph--banner { min-height: 220px; }
  #mymy-grid-{{ section.id }} .ph--mini { min-height: 200px; }

  /* ðŸ”¸ Responsive Tablets */
  @media (max-width: 980px) {
    #mymy-grid-{{ section.id }} .grid-wrap {
      grid-template-columns: 1fr;
    }
    #mymy-grid-{{ section.id }} .left-col {
      width: 100% !important;
      height: auto !important;
    }
  }

  /* ðŸ”¸ Responsive MÃ³viles pequeÃ±os */
  @media (max-width: 600px) {
    #mymy-grid-{{ section.id }} {
      padding: 0 15px;
    }

    #mymy-grid-{{ section.id }} .mini-row {
      grid-template-columns: 1fr;
    }

    #mymy-grid-{{ section.id }} .prod-img {
      width: 180px !important;
    }

    #mymy-grid-{{ section.id }} .brand-img {
      max-width: 60px;
    }
  }
</style>


{% schema %}
{
  "name": "MYMY Grid",
  "settings": [
    { "type": "color", "id": "accent", "label": "Color borde", "default": "#f8ccd2" },
    { "type": "range", "id": "radius", "label": "Radio esquinas (px)", "min": 0, "max": 30, "step": 1, "default": 16 },
    {
      "type": "range",
      "id": "gap",
      "label": "Espacio entre cards (px)",
      "min": 8,
      "max": 32,
      "step": 1,
      "default": 12
    },
    {
      "type": "range",
      "id": "prod_size",
      "label": "TamaÃ±o productos izquierda (px)",
      "min": 100,
      "max": 400,
      "step": 10,
      "default": 220
    },
    {
      "type": "text",
      "id": "left_card_width",
      "label": "Ancho del contenedor (por ejemplo: 300px o 100%)",
      "default": "300px"
    },
    {
      "type": "text",
      "id": "left_card_height",
      "label": "Alto del contenedor (por ejemplo: 400px o auto)",
      "default": "400px"
    }
  ],
  "blocks": [
    {
      "type": "left_card",
      "name": "Card vertical",
      "limit": 1,
      "settings": [
        { "type": "image_picker", "id": "logo", "label": "Logo (arriba)" },
        { "type": "text", "id": "logo_alt", "label": "Alt logo", "default": "MYMY shoes" },
        { "type": "image_picker", "id": "img1", "label": "Producto 1 (izq)" },
        { "type": "text", "id": "alt1", "label": "Alt producto 1", "default": "Producto 1" },
        { "type": "image_picker", "id": "img2", "label": "Producto 2 (abajo)" },
        { "type": "text", "id": "alt2", "label": "Alt producto 2", "default": "Producto 2" },
        { "type": "url", "id": "link", "label": "Link (opcional)" }
      ]
    },
    {
      "type": "promo_banner",
      "name": "Promo banner",
      "limit": 1,
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Imagen banner" },
        { "type": "text", "id": "alt", "label": "Alt banner", "default": "PromociÃ³n" },
        { "type": "url", "id": "link", "label": "Link (opcional)" }
      ]
    },
    {
      "type": "small_left",
      "name": "Mini izq",
      "limit": 1,
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Imagen mini 1" },
        { "type": "text", "id": "alt", "label": "Alt mini 1", "default": "Producto" },
        { "type": "url", "id": "link", "label": "Link (opcional)" }
      ]
    },
    {
      "type": "small_right",
      "name": "Mini der",
      "limit": 1,
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Imagen mini 2" },
        { "type": "text", "id": "alt", "label": "Alt mini 2", "default": "Producto" },
        { "type": "url", "id": "link", "label": "Link (opcional)" }
      ]
    }
  ],
  "max_blocks": 4,
  "presets": [
    {
      "name": "MYMY Grid",
      "blocks": [
        { "type": "left_card" },
        { "type": "promo_banner" },
        { "type": "small_left" },
        { "type": "small_right" }
      ]
    }
  ]
}
{% endschema %}
